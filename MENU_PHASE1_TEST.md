# 菜单功能第一阶段 — 测试指南

## 🧪 测试场景

### 场景 1：初次使用（初始化数据）
**预期行为：**
1. 打开菜单首页 → 显示 8 个预设菜品
2. 统计数字显示"8道菜品"
3. 菜品网格正确加载所有菜品卡片

**测试步骤：**
```
1. 清空 uni-app Storage
2. 进入 /pages/menu/index
3. 验证菜品加载和显示
```

---

### 场景 2：添加菜品
**预期行为：**
1. 点击"配置菜单"进入配置页
2. 点击"➕"打开添加表单
3. 填写菜品信息后提交
4. 返回首页，菜品数+1

**测试步骤：**
```
1. 进入 /pages/menu/config
2. 点击"➕"添加菜品按钮
3. 输入表单数据：
   - 名称：鱼香肉丝
   - 分类：中餐
   - 难度：2 星
   - emoji：🍗
   - 标签：输入 "辣" 后按空格
   - 外卖：勾选
4. 点击"添加菜品"提交
5. 验证 Toast 提示"菜品已添加"
6. 返回首页验证菜品出现
```

---

### 场景 3：编辑菜品
**预期行为：**
1. 在配置页找到菜品
2. 点击"✏️"编辑按钮
3. 修改菜品信息后提交
4. 数据更新成功

**测试步骤：**
```
1. 进入配置页
2. 找到"红烧牛肉面"
3. 点击"✏️"编辑
4. 修改名称为"清汤牛肉面"
5. 点击"更新菜品"
6. 验证名称在列表中更新
```

---

### 场景 4：删除菜品
**预期行为：**
1. 点击"🗑️"删除按钮
2. 弹出确认对话框
3. 确认删除后菜品从列表消失
4. 统计数字-1

**测试步骤：**
```
1. 进入配置页
2. 点击任意菜品的"🗑️"按钮
3. 在弹窗中点击"确认删除"
4. 验证菜品消失，统计数字减少
5. 返回首页验证菜品消失
```

---

### 场景 5：分类筛选
**预期行为：**
1. 在配置页选择不同分类标签
2. 菜品列表快速刷新并只显示该分类菜品
3. "全部"标签显示所有菜品

**测试步骤：**
```
1. 进入配置页
2. 点击"中餐"标签
3. 验证只显示 category='chinese' 的菜品
4. 点击"日料"标签
5. 验证只显示 category='japanese' 的菜品
6. 点击"全部"标签
7. 验证显示所有菜品
```

---

### 场景 6：表单验证
**预期行为：**
1. 不填菜品名称提交 → 警告"请输入菜品名称"
2. 不填 emoji 提交 → 警告"请输入菜品emoji"
3. emoji 输入超过 2 字符 → 自动截断

**测试步骤：**
```
1. 打开添加表单
2. 留空"菜品名称"，点击提交
3. 验证 Toast 警告
4. 填入名称，清空"emoji"，点击提交
5. 验证 Toast 警告
6. 在 emoji 输入框输入 3 个字符
7. 验证只保留 2 个字符（maxlength 限制）
```

---

### 场景 7：标签管理
**预期行为：**
1. 在表单中输入标签并按空格/逗号添加
2. 标签显示为带"✕"的标签块
3. 点击"✕"删除标签
4. 提交后标签数据正确保存

**测试步骤：**
```
1. 打开添加表单
2. 在标签输入框输入 "辣" 并按空格
3. 验证 "辣" 出现在下方标签区
4. 继续输入 "快手" 并按空格
5. 验证两个标签都显示
6. 点击其中一个标签的"✕"
7. 验证该标签被移除
8. 提交表单并编辑同一菜品
9. 验证标签数据保存正确
```

---

### 场景 8：UI/动效验证

#### Glass Card 效果
```
1. 在首页或配置页查看卡片
2. 验证半透明背景 + 模糊效果
3. 验证细微的边框和内阴影
```

#### 悬停效果
```
1. 在菜品卡片上悬停鼠标
2. 验证卡片向上移动 5px
3. 验证阴影增强，边框发光（蓝色）
```

#### 星轨背景
```
1. 打开任意菜单页面
2. 观察背景中的 3 条渐变轨道缓慢浮动
3. 观察 15 颗星星随机闪烁
```

#### 入场动画
```
1. 打开首页
2. 验证标题从下方淡入弹入
3. 验证卡片依次从下向上淡入（延迟）
```

---

### 场景 9：导航交互
**预期行为：**
1. 首页点击"配置菜单" → 进入配置页
2. 配置页左上角"←"按钮 → 返回首页
3. 首页菜品数据与配置页实时同步

**测试步骤：**
```
1. 在首页点击"配置菜单"
2. 验证进入配置页，URL 为 /pages/menu/config
3. 在配置页添加一个菜品
4. 点击"←"返回首页
5. 验证新菜品出现在首页网格中
6. 统计数字正确更新
```

---

### 场景 10：数据持久化
**预期行为：**
1. 添加/修改/删除菜品后关闭页面
2. 重新打开页面，数据依然存在
3. 清除 Storage 后，重新加载默认菜品

**测试步骤：**
```
1. 在配置页添加菜品"蛋炒饭" 🍚
2. 关闭浏览器开发者工具的 Storage
3. 刷新页面或返回首页
4. 验证"蛋炒饭"依然存在
5. 打开浏览器控制台，执行：
   localStorage.clear()
6. 刷新页面
7. 验证回到初始化 8 个菜品的状态
```

---

## 📋 检查清单

### 功能完整性
- [ ] 首页显示所有菜品
- [ ] 配置页可添加菜品
- [ ] 配置页可编辑菜品
- [ ] 配置页可删除菜品（带确认）
- [ ] 分类筛选功能正常
- [ ] 表单验证正确
- [ ] 标签添加/删除功能正常
- [ ] 外卖状态可勾选

### UI/设计规范
- [ ] Glass Card 毛玻璃效果正确
- [ ] 配色遵循设计规范（蓝紫渐变）
- [ ] 按钮样式正确（渐变 + 阴影）
- [ ] 星轨背景动画流畅
- [ ] 星星闪烁效果正常
- [ ] 文字大小和间距合理
- [ ] emoji 图标显示正确
- [ ] 卡片圆角正确

### 交互体验
- [ ] 悬停效果流畅（无卡顿）
- [ ] 点击反馈及时（Toast 提示）
- [ ] 表单输入流畅
- [ ] 页面切换平滑
- [ ] 没有控制台错误

### 响应式适配
- [ ] PC 端：菜品 3 列网格
- [ ] 平板端：菜品 2 列网格
- [ ] 手机端：菜品 1 列网格
- [ ] 文本不超出容器

### 数据完整性
- [ ] 所有菜品字段保存正确
- [ ] 创建/更新时间戳正确
- [ ] 本地 Storage 数据格式正确
- [ ] 数据能正确序列化/反序列化

---

## 🐛 已知限制（待阶段二实现）

1. **随机推荐页面** - 点击"随机选"显示开发中提示
2. **点餐页面** - 未实现
3. **食谱详情页** - 未实现
4. **转盘动画** - 未实现
5. **推荐商家逻辑** - 未实现

---

## 💡 调试技巧

### 查看本地存储数据
```javascript
// 在浏览器控制台运行
const items = uni.getStorageSync('menu_items')
console.log(items)
```

### 重置所有菜品
```javascript
// 回到初始化状态
uni.setStorageSync('menu_items', [])
location.reload()
```

### 添加测试菜品
```javascript
import MenuAPI from '@/api/menu'
MenuAPI.add({
  name: '测试菜品',
  category: 'simple',
  difficulty: 1,
  icon: '🍱',
  tags: ['测试'],
  isTakeout: false
})
```

---

## 📞 反馈收集

### 需要反馈的方面
1. **UI 美观度** - Glass Card 和渐变设计是否符合预期？
2. **交互流畅性** - 页面切换和动画是否流畅？
3. **功能完整性** - 阶段一功能是否完整？
4. **数据精度** - 菜品数据保存是否准确？
5. **兼容性** - 在不同设备上是否正常工作？

---

## ✅ 测试完成标准

当以下条件都满足时，认为阶段一测试完成：

- ✅ 所有功能场景测试通过
- ✅ 所有 UI/设计规范验证通过
- ✅ 没有控制台 JavaScript 错误
- ✅ 数据持久化正确
- ✅ 响应式适配完美
- ✅ 交互流畅无卡顿

---

> 测试完成后即可开始阶段二开发（随机推荐 + 点餐页面）
